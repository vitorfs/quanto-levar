{% extends 'base.html' %}

{% block titulo %}Quanto Levar Para {{ cidade.nome }}?{% endblock %}

{% block conteudo %}
  <h2>Para {{ cidade.nome }}</h2>
  <div class="container">
    <form action="{% url 'calculo' cidade.slug %}" method="post" id="calculo">
      {% csrf_token %}
      <div class="dias-viagem">
        <label for="dias">Dias de Viagem</label>
        <input type="text" id="dias" name="dias">
        <div class="erro-dias">Informe o n√∫mero de dias antes de prosseguir</div>
      </div>
      <ul class="niveis">
        {% for nivel in niveis %}
          <li><input type="radio" name="nivel" value="{{ nivel.id }}" {% if forloop.counter == 1 %} checked="checked" {% endif %} > {{ nivel.nome }}</li>
        {% endfor %}
      </ul>
      <div class="container-despesas">
        {% for nivel, despesas in niveis_despesas.iteritems %}
          {% regroup despesas by despesa.categoria as categorias_despesas %}
          <div nivel="{{ nivel }}" {% if forloop.counter > 1 %} class="hide"{% endif %}>
            {% for despesa in categorias_despesas %}
              <h4>{{ despesa.grouper }}</h4>
              <ul class="despesas">
                {% for item in despesa.list %}
                  <li><input name="despesas-selecionadas" type="checkbox" value="{{ item.despesa.id}}" checked="checked"/>{{ item.despesa.nome }}</li>
                {% endfor %}
              </ul>
            {% endfor %}
          </div>
        {% endfor %}
      </div>
      <button type="submit" id="calcular" class="btn">Calcular</button>
    </form>
  </div>
{% endblock conteudo %}
